<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>APT — Student Signup (Download FAQ)</title>
  <style>
    :root{
      --bg:#05060a;
      --card:#0e1117;
      --accent1:#ff4d6d;
      --accent2:#6b8cff;
      --glass: rgba(255,255,255,0.05);
      --glass-border: rgba(255,255,255,0.06);
      --radius:18px;
      --mono:'Segoe UI', Roboto, system-ui, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;font-family:var(--mono);background:radial-gradient(1000px 600px at 10% 10%,rgba(107,140,255,0.06),transparent),radial-gradient(800px 500px at 90% 90%,rgba(255,77,109,0.04),transparent),var(--bg);color:#e6eef8;overflow:hidden}

    /* layout */
    .stage{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:40px;min-height:100vh;padding:60px;}
    @media(max-width:980px){.stage{flex-direction:column;padding:22px;gap:18px}}

    .hero{flex:1;position:relative;padding:48px;border-radius:26px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));box-shadow:0 10px 40px rgba(2,6,23,0.6);border:1px solid var(--glass-border);overflow:hidden}
    @media(max-width:980px){.hero{padding:28px;width:100%}}

    .logo{display:flex;align-items:center;gap:12px;margin-bottom:6px}
    .logo .mark{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:grid;place-items:center;color:#fff;font-weight:800}
    h1{font-size:clamp(22px,5vw,32px);margin:8px 0 18px;line-height:1.2}
    p.lead{opacity:0.95;color:#dceeff;margin-bottom:16px}

    /* Card / form */
    .card{flex:0 0 420px;max-width:100%;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:28px;border-radius:var(--radius);backdrop-filter:blur(6px);border:1px solid var(--glass-border);}
    @media(max-width:600px){.card{width:100%;padding:18px}}
    form{display:flex;flex-direction:column;gap:14px}
    label{font-size:14px;opacity:0.95}
    input[type=text]{width:100%;padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.08);background:var(--glass);color:#fff;font-size:16px}
    .actions{display:flex;align-items:center;gap:12px;margin-top:10px;flex-wrap:wrap}
    button.primary{flex:1;padding:14px 16px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:700;font-size:16px;cursor:pointer}

    .submit-orb{width:56px;height:56px;border-radius:50%;background:conic-gradient(from 0deg,var(--accent1),var(--accent2));display:grid;place-items:center}
    .hint{font-size:12px;opacity:0.8}
    .success{display:none;margin-top:8px;padding:10px;border-radius:10px;background:linear-gradient(90deg,#2ad08d,#14b38a);color:#022}
    .meta{font-size:13px;opacity:0.8;margin-top:12px;text-align:center}

    /* full-screen particle canvas sits behind content */
    #fxCanvas{position:fixed;right:0;left:0;top:0;bottom:0;z-index:0;display:block}
    .stage, .hero, .card{position:relative;z-index:2}

    /* subtle performance toggle */
    .perf-toggle{position:fixed;left:12px;bottom:12px;z-index:4;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:10px;font-size:13px;color:#eaf2ff}

    /* accessibility */
    @media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important}}
  </style>
</head>
<body>

  <!-- High-complexity particle system canvas (WebGL-like behaviour implemented with 2D for compatibility) -->
  <canvas id="fxCanvas" aria-hidden="true"></canvas>

  <div class="stage">
    <section class="hero">
      <div class="logo"><div class="mark">APT</div><div><div style="font-weight:700">APT Study</div><div style="font-size:12px;opacity:0.7">Smart signups · instant FAQ</div></div></div>
      <h1>Sign up — grab the FAQ instantly</h1>
      <p class="lead">Enter your details to auto-send them to Google Forms and get your FAQ instantly. Touch / hover the background to create beautiful particle ripples.</p>
    </section>

    <aside class="card">
      <div style="text-align:center;margin-bottom:12px"><strong>Student Signup</strong><br><small style="opacity:0.7">2 fields • Instant PDF</small></div>
      <form id="signup">
        <label for="name">Student Name</label>
        <input id="name" name="studentName" type="text" placeholder="e.g. Aman Verma" required />

        <label for="number">Student Number</label>
        <input id="number" name="studentNumber" type="text" placeholder="e.g. 0123456789" required />

        <div class="actions">
          <button type="submit" class="primary">Submit & Download FAQ</button>
          <div class="submit-orb" aria-hidden="true"></div>
        </div>

        <div class="hint">After submission, your FAQ will download automatically.</div>
        <div class="success" id="successBox">Submitted! Your FAQ is ready — downloading now...</div>
      </form>
      <div class="meta">© 2025 APT Study · Hosted on GitHub Pages</div>
    </aside>
  </div>

  <div class="perf-toggle" id="perf">Particles: <span id="pc">Auto</span> · Tap to reduce</div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    /* ---------------- CONFIG (Google Form) ---------------- */
    const CONFIG={
      FORM_ACTION:'https://docs.google.com/forms/d/e/1FAIpQLSfiWI5kS8U7SYRTIePsdECVhmdkQq4vy_NcMeFViSOMuOlDlA/formResponse',
      ENTRY_NAME:'entry.1746928711',
      ENTRY_NUMBER:'entry.414763735'
    };

    /* ------------- Advanced Particle Engine -------------
       Features:
       - Adaptive particle count (mobile-aware)
       - Multiple emitters (pointer, ambient)
       - Attraction / repulsion, velocity damping
       - Trails, additive blending, glow using radial gradients
       - Connect-the-dots lines with distance-based alpha
       - LFO color cycling & subtle field noise
    -----------------------------------------------------*/
    (function ParticleEngine(){
      const canvas = document.getElementById('fxCanvas');
      const ctx = canvas.getContext('2d');
      let W = canvas.width = innerWidth, H = canvas.height = innerHeight;
      let DPR = Math.min(window.devicePixelRatio || 1, 2);
      canvas.width = Math.floor(W * DPR); canvas.height = Math.floor(H * DPR);
      canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
      ctx.scale(DPR,DPR);

      // adapt particle count
      const isMobile = /Mobi|Android|iPhone|iPad/.test(navigator.userAgent) || innerWidth < 700;
      let BASE_PARTICLES = isMobile ? 60 : 220;

      // let user toggle
      const perf = document.getElementById('perf'); const pc = document.getElementById('pc');
      let reduced = false; function updateLabel(){ pc.textContent = reduced ? 'Low' : (isMobile? 'Mobile' : 'High'); }
      perf.addEventListener('click', ()=>{ reduced = !reduced; updateLabel(); }); updateLabel();

      // particle structure
      class Particle{
        constructor(x,y){
          this.reset(x,y);
        }
        reset(x,y){
          this.x = x + (Math.random()-0.5)*20;
          this.y = y + (Math.random()-0.5)*20;
          const angle = Math.random()*Math.PI*2;
          const speed = Math.random()*1.8 + 0.2;
          this.vx = Math.cos(angle)*speed;
          this.vy = Math.sin(angle)*speed;
          this.life = Math.random()*80 + 60;
          this.maxLife = this.life;
          this.size = Math.random()*2.6 + 0.6;
          this.hue = Math.random()*360;
        }
        step(dt, index){
          // field noise (cheap, smooth)
          const nx = Math.sin((this.x*0.01) + (index*0.17)) * 0.3;
          const ny = Math.cos((this.y*0.01) + (index*0.23)) * 0.3;
          this.vx += nx * 0.02; this.vy += ny * 0.02;

          // pointer interaction
          if(pointer.active){
            const dx = pointer.x - this.x, dy = pointer.y - this.y; const d2 = dx*dx + dy*dy; const d = Math.sqrt(d2+0.0001);
            const influence = Math.max(0, 1 - d / (pointer.radius));
            // attract or repel based on pointer.mode
            const force = (pointer.mode === 'repel' ? -1 : 1) * influence * (pointer.strength || 0.65);
            this.vx += (dx/d) * force * 0.6; this.vy += (dy/d) * force * 0.6;
          }

          // velocity damping & update
          this.vx *= 0.995; this.vy *= 0.995;
          this.x += this.vx * dt; this.y += this.vy * dt;

          this.life -= dt * 0.8;
          if(this.life <= 0 || this.x < -50 || this.x > W + 50 || this.y < -50 || this.y > H + 50){ this.reset(Math.random()*W, Math.random()*H); }
        }
        draw(ctx, t){
          const lifeRatio = this.life/this.maxLife;
          const a = Math.max(0, Math.min(1, lifeRatio));
          const size = this.size * (1 + (1-lifeRatio)*1.8);
          // glow
          const g = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, size*6);
          const hue = (this.hue + t*10) % 360;
          g.addColorStop(0, `hsla(${hue},90%,60%,${0.9*a})`);
          g.addColorStop(0.35, `hsla(${(hue+40)%360},80%,55%,${0.25*a})`);
          g.addColorStop(1, `hsla(${(hue+80)%360},70%,45%,0)`);
          ctx.fillStyle = g; ctx.beginPath(); ctx.arc(this.x, this.y, size*6, 0, Math.PI*2); ctx.fill();
        }
      }

      // pool
      let particles = [];
      function spawn(n){ for(let i=0;i<n;i++) particles.push(new Particle(Math.random()*W, Math.random()*H)); }
      spawn(BASE_PARTICLES);

      // pointer / touch
      const pointer = {x:W/2,y:H/2,active:false,radius:160,strength:0.9,mode:'attract'};
      window.addEventListener('pointermove', e=>{ pointer.x = e.clientX; pointer.y = e.clientY; });
      window.addEventListener('pointerdown', e=>{ pointer.active=true; pointer.mode = e.button===2 ? 'repel':'attract'; pointer.strength = 1.6; pointer.radius = isMobile? 120:200; });
      window.addEventListener('pointerup', e=>{ pointer.active=false; pointer.strength = 0.9; });
      window.addEventListener('touchstart', e=>{ pointer.active=true; pointer.mode='attract'; pointer.radius=140; pointer.strength=1.2; pointer.x=e.touches[0].clientX; pointer.y=e.touches[0].clientY; },{passive:true});
      window.addEventListener('touchmove', e=>{ pointer.x=e.touches[0].clientX; pointer.y=e.touches[0].clientY; },{passive:true});
      window.addEventListener('touchend', e=>{ pointer.active=false; });

      // dynamic connections
      function drawConnections(ctx, list){
        const len = list.length; ctx.beginPath();
        for(let i=0;i<len;i++){
          const a = list[i];
          for(let j=i+1;j<Math.min(len,i+12);j++){
            const b = list[j]; const dx=a.x-b.x, dy=a.y-b.y, d2=dx*dx+dy*dy;
            if(d2 < 9000){ const alpha = 1 - Math.sqrt(d2)/95; ctx.strokeStyle = `rgba(180,200,255,${alpha*0.06})`; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke(); }
          }
        }
      }

      // resize handler
      let last = performance.now();
      window.addEventListener('resize', ()=>{
        W = canvas.width = innerWidth; H = canvas.height = innerHeight; DPR = Math.min(window.devicePixelRatio||1,2);
        canvas.width = Math.floor(W*DPR); canvas.height = Math.floor(H*DPR); canvas.style.width = W+'px'; canvas.style.height = H+'px'; ctx.setTransform(DPR,0,0,DPR,0,0);
      });

      // main loop
      let acc = 0; function frame(now){
        const dt = Math.min(32,(now - last)) / 16; last = now; acc += (now - last);
        // adaptive count
        const target = reduced ? Math.max(30, Math.floor(BASE_PARTICLES*0.25)) : (isMobile? Math.floor(BASE_PARTICLES*0.9) : BASE_PARTICLES);
        if(particles.length < target) spawn(target - particles.length);
        if(particles.length > target) particles.length = target;

        // fade background slightly to create trails
        ctx.clearRect(0,0,W,H);
        ctx.globalCompositeOperation = 'lighter';

        // ambient ambient soft radial
        const rad = ctx.createRadialGradient(W*0.8,H*0.15,0,W*0.8,H*0.15,Math.max(W,H)*0.8);
        rad.addColorStop(0,'rgba(107,140,255,0.05)'); rad.addColorStop(1,'rgba(255,77,109,0)');
        ctx.fillStyle = rad; ctx.fillRect(0,0,W,H);

        // step + draw
        const t = now * 0.00012;
        for(let i=0;i<particles.length;i++){ particles[i].step(dt, i); particles[i].draw(ctx, t); }

        // subtle connecting lines
        ctx.globalCompositeOperation = 'source-over'; drawConnections(ctx, particles);

        // pointer bloom
        if(pointer.active){ const g = ctx.createRadialGradient(pointer.x,pointer.y,0,pointer.x,pointer.y,pointer.radius); g.addColorStop(0,'rgba(255,255,255,0.06)'); g.addColorStop(1,'rgba(255,255,255,0)'); ctx.fillStyle=g; ctx.fillRect(pointer.x-pointer.radius,pointer.y-pointer.radius,pointer.radius*2,pointer.radius*2); }

        requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);

      // reduce CPU on page hide
      document.addEventListener('visibilitychange', ()=>{ if(document.hidden){ cancelAnimationFrame(frame); } });
    })();

    /* ------------------- Form handling & PDF ------------------*/
    (function(){
      const form = document.getElementById('signup');
      const success = document.getElementById('successBox');
      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const data = new FormData(form);
        const name = (data.get('studentName')||'').trim();
        const number = (data.get('studentNumber')||'').trim();
        if(!name || !number) return alert('Please fill both fields');

        if(CONFIG.FORM_ACTION){
          try{
            const payload = new URLSearchParams();
            payload.append(CONFIG.ENTRY_NAME, name);
            payload.append(CONFIG.ENTRY_NUMBER, number);
            await fetch(CONFIG.FORM_ACTION, {method:'POST', mode:'no-cors', body: payload});
          }catch(err){ console.warn('Form submit (no-cors) failed or blocked — data may still be recorded by Google.'); }
        }

        success.style.display = 'block'; createFaqPdf({name,number});
      });

      function createFaqPdf({name,number}){
        const { jsPDF } = window.jspdf; const doc = new jsPDF({unit:'pt',format:'a4'}); const margin = 48;
        doc.setFillColor(11,14,22); doc.rect(0,0,doc.internal.pageSize.getWidth(),80,'F');
        doc.setFontSize(24); doc.setTextColor(255,255,255); doc.text('APT Study — FAQ', margin, 48);
        doc.setFontSize(12); doc.setTextColor(200); doc.text(`Student: ${name}    •    Number: ${number}`, margin, 74);
        const faqs = [
          {q:'What courses does APT offer?', a:'We offer commerce classes (11th & 12th), CA Foundation, CA Intermediate, CS, CAF, and practical workshops.'},
          {q:'How do I join?', a:'Fill this signup form and our counsellor will contact you. You can also visit our centre.'},
          {q:'Is there a free trial?', a:'Yes — we host monthly demo sessions for new students.'},
          {q:'Placement support?', a:'Eligible students receive placement assistance as part of advanced programs.'},
          {q:'Contact', a:'Email: support@aptstudy.example • Phone: +91-XXXXXXXXXX'}
        ];
        let y = 110; for(const f of faqs){ doc.setFontSize(14); doc.setTextColor(240); doc.text(f.q, margin, y); y+=18; doc.setFontSize(11); doc.setTextColor(180); const lines = doc.splitTextToSize(f.a, doc.internal.pageSize.getWidth() - margin*2); doc.text(lines, margin, y); y += lines.length*14 + 16; if(y > 720){ doc.addPage(); y = margin; }}
        doc.setFontSize(9); doc.setTextColor(150); doc.text('Generated by APT Study · Thank you!', margin, doc.internal.pageSize.getHeight()-28);
        const ts = new Date().toISOString().replace(/[:.]/g,'-'); doc.save(`APT-FAQ-${name.replace(/\s+/g,'_')}-${ts}.pdf`);
      }
    })();
  </script>
</body>
</html>
